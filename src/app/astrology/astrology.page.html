<ion-header [translucent]="true">
    <ion-toolbar>
        <ion-title>
            Heavenly Astrology
        </ion-title>
    </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
    <!-- Swipe Left (Back to Constellation) Indicator -->
    <ion-icon name="chevron-back-outline" class="swipe-indicator swipe-indicator-left"
        (click)="navigateToMyth()"></ion-icon>

    <ion-header collapse="condense">
        <ion-toolbar>
            <ion-title size="large">Astrology</ion-title>
        </ion-toolbar>
    </ion-header>


    <!-- Display Constellation Data if available -->
    <div *ngIf="hasValidData; else noData" style="display: flex; flex-direction: column; align-items: center;">
        <!-- Use async pipe to get constellation data -->
        <ng-container *ngIf="astrologyData$ | async as astrologyData">
            <!-- Buttons container -->
            <div style="display: flex; gap: 10px; justify-content: center; align-items: center; margin-top: 10px;">
                <!-- Button for Short Astrology Narration (pass data if needed, or keep as is if component handles it) -->
                <ion-button style="background-color: lightblue" (click)="narrateAstrologyShort()" fill="clear"
                    aria-label="Narrate short Astrology">
                    <ion-icon slot="icon-only" name="mic-outline"></ion-icon>
                    <!-- <span style="font-size: 0.8em; margin-left: 4px;">Short</span> -->
                </ion-button>

                <!-- Button for Long Astrology Narration (pass data if needed, or keep as is)-->
                <ion-button style="background-color: lightgreen" (click)="narrateAstrologyLong()" fill="clear"
                    aria-label="Narrate full story">
                    <ion-icon slot="icon-only" name="mic-outline"></ion-icon>
                    <span style="font-size: 0.8em; margin-left: auto; width: 200px;">Astrology</span>
                </ion-button>
            </div>

            <!-- Original Card for Short Astrology -->
            <ion-card style="width: 90%; max-width: 600px;">
                <ion-card-header>
                    <!-- Use name from async pipe -->
                    <ion-card-title>{{ astrologyData?.name }}</ion-card-title>
                </ion-card-header>
                <ion-card-content>
                    <!-- Use Astrology from async pipe -->
                    <p>{{ astrologyData?.astrology }}</p>
                </ion-card-content>
            </ion-card>
        </ng-container>

        <ion-card style="width: 90%; max-width: 600px;" *ngIf="currentAstrologyLong">
            <ion-card-content>
                <p>{{ currentAstrologyLong }}</p>
            </ion-card-content>
        </ion-card>

    </div>

    <!-- Template to show if no data -->
    <ng-template #noData>
        <!-- Wrapper div to enable flex centering -->
        <!-- ion-fill-content might require parent to have known height, using 100% height style -->
        <div style="height: 100%;" class="ion-justify-content-center ion-align-items-center ion-flex">
            <!-- Centered content -->
            <div class="ion-text-center">
                <p class="info-text" style="color: yellow;">Go to the Constellation tab and identify a constellation
                    first.</p>
            </div>
        </div>
    </ng-template>




</ion-content>