<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Constellation Identifier
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">

  <!-- Swipe Right Indicator -->
  <ion-icon name="chevron-forward-outline" class="swipe-indicator swipe-indicator-right"
    (click)="navigateToMyth()"></ion-icon>

  <!-- Constellation Info Card -->
  <ion-card
    *ngIf="currentConstellationName && currentConstellationName !== 'Unknown' && currentConstellationName !== 'Error finding constellation'"
    class="ion-margin-top">
    <img *ngIf="currentConstellationImage" [src]="currentConstellationImage"
      alt="{{ currentConstellationName }} Image" />

    <ion-card-header>
      <ion-card-title>{{ currentConstellationName }}</ion-card-title>
    </ion-card-header>
  </ion-card>

  <div
    *ngIf="!currentConstellationName || currentConstellationName === 'Unknown' || currentConstellationName === 'Error finding constellation'"
    class="ion-text-center ion-margin-top">
    <p>{{ currentConstellationName === 'Error finding constellation' ?
      'Could not determine constellation.' :
      '' }}</p>
  </div>


  <div class="ion-text-center ion-margin-top">
    <strong>Point your device to the sky and<br>press the 'Find Constellation' button</strong>
  </div>

  <!-- Buttons Div -->
  <div class="ion-text-center ion-margin-top">
    <ion-button (click)="findConstellation()" expand="block">Find Constellation</ion-button>
  </div>

  <!-- Debug Info Box (Moved Here) -->
  <ion-card *ngIf="isTesting" class="ion-margin-top" color="light">
    <ion-card-header>
      <ion-card-title>Debug Info</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p>Lat: {{ currentLatitude?.toFixed(4) ?? 'N/A' }}</p>
      <p>Lon: {{ currentLongitude?.toFixed(4) ?? 'N/A' }}</p>
      <p>Azimuth (alpha): {{ currentAzimuth?.toFixed(2) ?? 'N/A' }}</p>
      <p>Altitude (beta): {{ currentAltitude?.toFixed(2) ?? 'N/A' }}</p>
      <p>Detected: {{ currentConstellationName ?? 'N/A' }} </p>
      <p>Image: {{ currentConstellationImage ?? 'N/A' }}</p>
    </ion-card-content>
  </ion-card>

</ion-content>

<!-- ADD FOOTER AND ITEM HERE -->
<ion-footer class="ion-no-border">
  <ion-toolbar>
    <ion-item lines="none">
      <ion-label class="ion-text-center">
        <p>Location: {{ currentLatitude?.toFixed(4) ?? 'N/A' }}, {{ currentLongitude?.toFixed(4) ?? 'N/A' }}</p>
      </ion-label>
    </ion-item>
  </ion-toolbar>
</ion-footer>